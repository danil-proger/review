#include <bits/stdc++.h>

using namespace std;

vector<vector<int>> g;
int timer = 0;
vector<int> used, d, f;

void dfs(int v){
    used[v] = 1;
    d[v] = timer++;
    for(int to : g[v]){
        if(!used[to]) {
            dfs(to);
        }
    }
    f[v] = timer++;
}

int main() {
    int n, x, root;
    cin >> n;
    g.resize(n + 1);
    used.resize(n + 1);
    d.resize(n + 1);
    f.resize(n + 1);
    for(int i = 0; i < n; ++i){
        cin >> x;
        if(x == 0){
            root = i + 1;
        }
        else{
            g[x].push_back(i + 1);
        }
    }
    dfs(root);
    int y, k;
    cin >> k;
    for(int i = 0; i < k; ++i){
        cin >> x >> y;
        if((d[x] < d[y]) && (f[y] < f[x])) cout << 1 << '\n';
        else cout << 0 << '\n';
    }
}
